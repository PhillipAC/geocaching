<!DOCTYPE HTML>
<html>
  <head>
    <script src="https://www.webglearth.com/v2/api.js"></script>
    <script>
      var targetMarker;
      var userMarker;
      var userX = 34.657264;
      var userY = -86.485851;
      var speed = 0.00001;
      function initialize() {
        var earth = new WE.map('earth_div');
        WE.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(earth); 
        userMarker = WE.marker([34.657264, -86.485851]).addTo(earth);
        userMarker.bindPopup("User", {maxWidth: 120, closeButton: true});
	      targetMarker = WE.marker([34.6267, -86.470968]).addTo(earth);
		    targetMarker.bindPopup("Target", {maxWidth: 120, closeButton: true});
        
        earth.setView([34.657264, -86.485851], 15);
        setInterval(() => {
          navigator.geolocation.getCurrentPosition(function(location) {
            userX = location.coords.latitude;
            userY = location.coords.longitude;
            userMarker.setPosition(userX, userY)
            earth.setView([userX, userY])
            document.getElementById("compass").style = "transform: rotate("+location.coords.heading+"deg)";
            document.getElementById("coordinates").innerHTML = userX + " , " + userY;
          });
        }, 500)
      }

    </script>
    <style>
      html, body{padding: 0; margin: 0}
      #earth_div{
        top: 1vh; 
        left: 5vw;
        height: 50vh;
        width: 90vw;
      }
      .coordinates{
        top: 50%;
      }
      #compass{
        width: 50vw;
      }
    </style>
    <title>Geocaching</title>
    <meta name="description" 
          content="Shows you your location and the location of where to go.">
  </head>
  <body onload="initialize()">
    <div id="earth_div"></div>
    <div id="coordinates"></div>
    <img id="compass" src="images/compass.png" alt="Compass"/>
  </body>
</html>